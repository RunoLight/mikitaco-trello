<!doctype html>
<html lang=en>
<head>
    <link rel="stylesheet" href="https://p.trellocdn.com/power-up.min.css">
    <script src="https://p.trellocdn.com/power-up.min.js"></script>
    <style>
        * { text-align: center; }
    </style>
    <title>Authorize</title>
</head>
<body>
<button type="button" class="mod-primary">Click to authorize</button>
<script src="https://p.trellocdn.com/power-up.min.js"></script>
<script>
    var t = window.TrelloPowerUp.iframe({
        appKey: 'fff4efd3f3ba3f0f515bd2aa84e97cd8',
        appName: 'Mikitaco business power up'
    });

    t.render(function() {
        document.querySelector('button').addEventListener('click', function() {
            t.getRestApi()
                .authorize({ scope: 'read,write' })
                .then(function(t) {
                    t.closePopup();
                })
                .catch(TrelloPowerUp.restApiError.AuthDeniedError, function() {
                alert('Cancelled!');
                t.closePopup();
            })
        }, false);
    });
</script>
</body>
</html>